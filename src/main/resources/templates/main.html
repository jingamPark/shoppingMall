<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<th:block layout:fragment="script">
    <script th:inline="javascript">


            $(document).ready(function () {
            $(".search").on("click", function (e) {
                e.preventDefault();
                page(0);
            });
        });

            function page(pageNumber) {
            location.href = "/" + pageNumber;
        }


    </script>
</th:block>


</head>
<body>
<div layout:fragment="content">

    <main id="main" class="main">

        <div class="pagetitle">
            <h1>쇼핑몰 </h1>
        </div><!-- End Page Title -->

        <section class="section">
        <div class="row row-cols-1  g-4">


                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">제품 판매Top3</h5>


                                <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
                                    <div class="carousel-inner">
                                        <div class="carousel-item active"  data-bs-interval="3000">
                                            <img src="" class="d-block w-100" alt="메인 이미지1">
                                        </div>
                                        <div class="carousel-item" data-bs-interval="3000">
                                            <img src="" class="d-block w-100" alt="메인 이미지2">
                                        </div>
                                        <div class="carousel-item" data-bs-interval="3000">
                                            <img src="" class="d-block w-100" alt="메인 이미지3">
                                        </div>
                                        <div class="col">

                                        </div>
                                    </div>
                                    <div class="col" ><!--제품 이미지 및 정보 시작 -->
                                        <th:block th:each="product, status : ${products.getContent()}">
                                            <div class="col-md-4 col-6" >
                                                <div class="card col-8">
                                                    <a th:href="'/products/view/' + ${product.id}" class="text-dark">
                                                        <img th:src="${product.imgUrl}" class="card-img-top"
                                                        th:alt="${product.prodName}" height="400">
                                                        <div class="card-body">
                                                            <h5 class="card-title">[[${product.prodName}]]</h5>
                                                            <p class="card-text">[[${product.prodDetail}]]</p>
                                                            <h3 class="card-title text-danger">
                                                                [[${product.price}]]원
                                                            </h3>
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                        </th:block>
                                    </div><!--상품 이미지 및 정보 끝-->
                                    <!--페이징 처리-->
                                    <div class="col">
                                        <form th:action="@{'/admin/products/' + ${products.number}}"
                                              method="get" th:object="${products}">

                                            <!-- <li>이전 </li> <li>1~5 반복</li>, <li>다음</li>-->
                                            <div class="row justify-content-center" th:with="start=${(products.number/maxPage) * maxPage + 1 } , end=${(products.totalPages==0 ) ? 1 :  (start + (maxPage -1) < products.totalPages ? start + (maxPage - 1): products.totalPages) }">
                                                <div class="col-4">
                                                    <ul class="pagination">
                                                        <!--이전-->
                                                        <li class="page-item" th:classappend="${products.first} ? 'disabled' : ''">
                                                            <a class="page-link"  href="javascript:void(0);"  th:onclick="'javascript:page(' + ${products.number - 1} + ')'  ">Previous</a>
                                                        </li>

                                                        <!--반복-->
                                                        <li class="page-item" th:each="page: ${#numbers.sequence(start,end)}"  th:classappend="${products.number eq page-1} ? 'active' : ''">
                                                            <a class="page-link"  href="javascript:void(0);" th:onclick="'javascript:page(' + ${page-1} + ')'  ">[[${page}]]</a>
                                                        </li>

                                                        <!--다음-->
                                                        <li class="page-item" th:classappend="${products.last} ? 'disabled' : ''">
                                                            <a class="page-link"  href="javascript:void(0);" th:onclick="'javascript:page(' + ${products.number + 1} + ')'  ">Next</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>


                                        </form>
                                    </div>
                                    <!--페이징 처리-->
                                </div>

                            </div>

                    </div>

                </div>
            </section>

        </main><!-- End #main -->




    </div>
</body>
</html>